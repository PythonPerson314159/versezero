<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>


<center>
<div id=container>
<div id=quote>

</div>


</div>
<div id=buttons><button onclick=this.blur;curpage-=1;display(curpage)>Previous Page</button><button onclick=this.blur;curpage+=1;display(curpage)>Next Page</button><div id="ismob"></div>
</div>
<div id=ontop>
<div id=ontoop></div></div>
</center>

<script>
books=['Genesis', 'Exodus', 'Leviticus', 'Numbers', 'Deuteronomy', 'Joshua', 'Judges', 'Ruth', '1 Samuel', '2 Samuel', '1 Kings', '2 Kings', '1 Chronicles', '2 Chronicles', 'Ezra', 'Nehemiah', 'Esther', 'Job', 'Psalm', 'Proverbs', 'Ecclesiastes', 'Song of Solomon', 'Isaiah', 'Jeremiah', 'Lamentations', 'Ezekiel', 'Daniel', 'Hosea', 'Joel', 'Amos', 'Obadiah', 'Jonah', 'Micah', 'Nahum', 'Habakkuk', 'Zephaniah', 'Haggai', 'Zechariah', 'Malachi', 'Matthew', 'Mark', 'Luke', 'John', 'Acts', 'Romans', '1 Corinthians', '2 Corinthians', 'Galatians', 'Ephesians', 'Philippians', 'Colossians', '1 Thessalonians', '2 Thessalonians', '1 Timothy', '2 Timothy', 'Titus', 'Philemon', 'Hebrews', 'James', '1 Peter', '2 Peter', '1 John', '2 John', '3 John', 'Jude', 'Revelation']
document.title="VerseZero"

async function getData(choicee,pagee) {
		choicee=choicee.replace("%20"," ")
document.getElementById("quote").innerHTML="<h1>Hold on a moment...</h1>"


	const response = await fetch('bible.txt');
    if (!response.ok) {
      throw new Error(`Response status: ${response.status}`);
    }

    result = await response.text();
if(location.href.split("/").slice(-1)[0].replace("%20","&nbsp;")==''||isNaN(location.href.split("/").slice(-1)[0].replace("%20","&nbsp;")*1))
{
choicee=pagee
pagee=0
}


	
curpage=pagee-1
noninc=0
if (choicee.slice(-6).toUpperCase()=="NONINC"){
noninc=1
choicee=choicee.slice(0,-6)
}

while (choicee.slice(-6)=="&nbsp;"){
choicee=choicee.slice(0,-6)

}

bookchapverse=bcv(choicee)
numm=undefined
if(["","versezero.netlify.app","#"].includes(location.href.split("/").slice(-2)[1].replace("%20","&nbsp;"))){numm=Math.floor(Math.random()*31102)+2}
	if (numm!=undefined){
[book,chap,verse]=bcv(result.split("\n")[numm+2])
verse=[verse,verse]
choicee=bcv(result.split("\n")[numm+2])[0]+" "+bcv(result.split("\n")[numm+2])[1]+":"+bcv(result.split("\n")[numm+2])[2]
	}
else{	
book=bookchapverse[0]
chap=String(bookchapverse[1])
verse=String(bookchapverse[2])
}
	
old=book
	for (u in books){
if (books[u].toUpperCase()==book.toUpperCase()){
	book=books[u]
		choicee=choicee.replace(old,book)
}
	}
if (verse.includes("-")){
verse=verse.split("-")
}

if (chap.includes("-")){
chap=chap.split("-")
}

if (book==''){
book=chap
chap='undefined'
}


//---
//---


if (isNaN(chap*1)==false){
chap=[chap,chap]
}

if (navigator.onLine==false){
 document.getElementById("container").innerHTML="<div id=quote><h2>You're offline!</h2><h1>Please connect to a network to use VerseZero and reload the page<h1></div>"
}

	
		

if (numm==undefined){

if (chap=='undefined'){
chap=[1,bcv(result.split("\n").filter((item)=>bcv(item)[0]==book).slice(-1)[0])[1]]
}
if (verse=='undefined'){
verse=[1,bcv(result.split("\n").filter((item)=>bcv(item)[0]==book&&bcv(item)[1]==chap[1]).slice(-1)[0])[2]]
}
if (isNaN(verse*1)==false){
verse=[verse,verse]
}


	if (verse[0]>=verse[1] && chap[0]>=chap[1]){
	verse=verse.reverse()
	}
	
	if (chap[0]>=chap[1]){
	chap=chap.reverse()
	}
	}
	
	options=[]
	
	a=-1
	b=0
	c=0
result.split("\n").forEach((item)=>{a+=1;if (bcv(item).toString()==book+","+chap[0].toString()+","+verse[0].toString()){b=a}})
		a=-1
result.split("\n").forEach((item)=>{a+=1;if (bcv(item).toString()==book+","+chap[1].toString()+","+verse[1].toString()){c=a}})
	console.log(b)
	console.log(result.split("\n")[(c-noninc)])
	
	
	choicee=choicee.split("-")
	
	if (noninc==1){
	choicee[1]=bcv(result.split("\n")[(c-noninc)]).slice(1,3).join(":")
	}
	
	choicee=choicee.join("-")
	
	for (j=b;j<=c-noninc;j++){
	options.push(bcv(result.split("\n")[j]).toString())
	}
document.title="VerseZero - "+choicee.replace("&nbsp;"," ")
	
verese=verse
maxx=0
unmapped=result.split('\n').slice(2,-1).filter((item)=>options.includes(bcv(item).toString()))

verese[1]=bcv(unmapped.slice(-1)[0])[2]
if (verese[0]==verese[1]){
verese=[verese[0]]
}
if (verese[0]==1&&verese[1]<verse[1]){
console.log(verse)
console.log(verese)
verese=['']
}
else{
verese[0]=":"+verese[0]
}
eee=0
rn=bcv(unmapped[0])[1]
for (r in unmapped){
if (bcv(unmapped[r])[1]!=rn){
unmapped[r*1-1]+="<br><br><br> <h6>"+book+" Chapter "+bcv(unmapped[r])[1]+"</h6><br><br><br>"
}
rn=bcv(unmapped[r])[1]

eee+=unmapped[r].length
if (eee>=200){
unmapped[r]+="<br><br><br>"
eee=0
}
}
choicep=choicee
display(curpage)
  }
  
  
  

  getData(location.href.split("/").slice(-2)[0].replace("%20","&nbsp;"),location.href.split("/").slice(-1)[0].replace("%20","&nbsp;"))
  

let lastUrl = location.href;
setInterval(() => {
  if (location.href != lastUrl) {
    lastUrl = location.href;
  getData(location.href.split("/").slice(-2)[0].replace("%20","&nbsp;"),location.href.split("/").slice(-1)[0].replace("%20","&nbsp;"))
  }
  
  document.getElementById("ismob").innerHTML=["","<button onclick=goo();this.blur()>Search</button>"][window.kboardless()*1]
}, 100);


function goo(){
 document.getElementById("container").style.filter="blur(8px)"
 document.getElementById("buttons").style.filter="blur(8px)"
  document.getElementById("ontoop").innerHTML="<input id=thinggy autocomplete=off></input><br><button onclick=fin();this.blur()>Go!</button>"

}


function fin(){
location.href="https://versezero.netlify.app/#/"+document.getElementById("thinggy").value
document.getElementById("container").style.filter="none"
document.getElementById("buttons").style.filter="none"
  document.getElementById("ontoop").innerHTML=''
}


function display(page){
	thingg=unmapped.map((item)=>item="<sup>"+bcv(item)[2]+" </sup>"+item.split('\t')[1]).join(" ").split("<br><br><br>")
	if (thingg[thingg.length-1]==''){
	thingg=thingg.slice(0,-1)
	}
	thingg=thingg.map((item)=>"<p>"+item+"</p>")
	
	thingg==thingg.filter((item)=>item!="<p></p>")
	
curpage=Math.max(Math.min(thingg.length-1,page),0)
fg=chap.join("-")+verese.join("-")
if (chap.length+verese.length>=3){
fg=chap[0]+verese[0]+"-"+chap[1]+":"+verese[1]
}

    document.getElementById('quote').innerHTML="<h1>"+thingg[curpage]+"</h1><h4>"+choicep+"<br> Page "+(curpage*1+1)+"/"+thingg.length+"</h4>"
}

active=0
choice=''
document.addEventListener('keydown', (event) => {
if (window.kboardless()==false){

 document.getElementById("ontoop").style.display=["none","block"][active]
 

if (event.key.length==1 && (/^[a-zA-Z0-9]+$/.test(event.key))||event.key==":"||event.key=="-"){
  choice+=event.key // Logs the key pressed
  }
  if (event.key=="Backspace"){
  if (choice.length==0){
 document.getElementById("container").style.filter="none"
 document.getElementById("buttons").style.filter="none"
  active=0
  }
  
  if (choice.slice(-6)=="&nbsp;"){
  choice=choice.split('').slice(0,-6).join('')
  }
  else{
  choice=choice.split('').slice(0,-1).join('')
  }}
  if (event.key==" "){
  choice+="&nbsp;"
  }
  console.log(choice)
  
  
 if (event.key=='Enter' && active==1){
 search()
 }
 
if (choice.slice(-6)=="search"){
choice=''
active=1
 document.getElementById("container").style.filter="blur(8px)"
 document.getElementById("buttons").style.filter="blur(8px)"
 }
 
  document.getElementById("ontoop").innerHTML=choice
  }
  
});


function bcv(e){
	bookscap=[]
books.forEach((item)=>bookscap.push(item.toUpperCase()))
	if (bookscap.includes(e.toUpperCase())){
		return [e]
	}
	
e=e.replaceAll('&nbsp;',' ')


p=[e.split("\t")[0].split(" ").slice(0,-1).join(" ")].concat(e.split("\t")[0].split(" ").slice(-1)[0].split(":"))

if (p.length>=4){
return [p[0],p[1]+"-"+p[2].split("-")[1],p[2].split("-")[0]+"-"+p[3]]}
else{
return p}
}

window.kboardless = function() {
  let check = false;
  (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
  return check;
};

function search(){
curpage=0
 active=0
 location.href="https://versezero.netlify.app/#/"+choice.replace("&nbsp;","%20")

 document.getElementById("container").style.filter="none"
 document.getElementById("buttons").style.filter="none"
 choice=""
  document.getElementById("ontoop").innerHTML=choice
}
</script>
<style>

#quote{
max-width:calc(max(75vw,800px));
}


#container{
text-align:center;
width:90vw;
height:75vh;
display:flex;
justify-content:center;
align-items:center;
}

sup{
font-weight:bold;
}

html{
font-family: Tahoma;
color:white;
background-color:black;
}
input{
width:300px;
font-size:20px;
text-align:center;
}
#ontoop{
text-align:center;
margin:0 auto;
}

#ontop{
position:fixed;
top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
}
p{
font-size:25px;
line-height:40px;
}
button{
font-size:25px;
padding: 7px;
border-radius:10px;
margin: 10px;
transition:0.1s;
border:none;

}
button:hover{
background:#999999;
transition:0.25s;
}
h1{
font-weight:111;
}
h2{
font-size:80px;
font-weight:411;
}
h6{
font-size:50px;
font-family:Times New Roman
}
</style>






